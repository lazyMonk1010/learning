# SQL Tutorial for Beginners (Oracle FreeSQL)

A simple SQL tutorial using **students and departments** so you can learn step by step. All examples work on [Oracle FreeSQL](https://freesql.oracle.com/) or any Oracle database.

---

## 1. Basic ideas

- **Database** = collection of tables  
- **Table** = rows and columns (like a spreadsheet)  
- **Row** = one record (e.g. one student)  
- **Column** = one kind of data (e.g. name, email)  
- **Primary Key** = column that uniquely identifies each row  
- **Foreign Key** = column that points to a primary key in another table (links tables)

---

## 2. Creating tables

### CREATE TABLE

**Query name:** Create a table  

**General query:**
```sql
CREATE TABLE table_name (
    column1 type constraints,
    column2 type constraints,
    ...
);
```

**Example:**
```sql
CREATE TABLE departments (
    dept_id   NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    dept_name VARCHAR2(50) NOT NULL
);
```

**Example:**
```sql
CREATE TABLE students (
    student_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name      VARCHAR2(100) NOT NULL,
    email     VARCHAR2(100),
    dept_id   NUMBER,
    year      NUMBER(1) DEFAULT 1,
    FOREIGN KEY (dept_id) REFERENCES departments(dept_id)
);
```

**Useful types:** `NUMBER`, `VARCHAR2(n)`, `DATE`, `NUMBER(1)` for 0/1.  
**Useful constraints:** `PRIMARY KEY`, `NOT NULL`, `DEFAULT value`, `FOREIGN KEY (col) REFERENCES other_table(col)`.

---

## 3. Changing table structure

### ALTER TABLE ADD

**Query name:** Add a column  

**General query:**
```sql
ALTER TABLE table_name ADD column_name type;
```

**Example:**
```sql
ALTER TABLE students ADD phone VARCHAR2(15);
```

### ALTER TABLE DROP

**Query name:** Remove a column  

**General query:**
```sql
ALTER TABLE table_name DROP COLUMN column_name;
```

**Example:**
```sql
ALTER TABLE students DROP COLUMN phone;
```

### DROP TABLE

**Query name:** Delete a table (and its data)  

**General query:**
```sql
DROP TABLE table_name;
```

**Example:**  
Use only when you really want to remove the table. Drop child tables before parent (e.g. drop tables that reference `students` before dropping `students`).

---

## 4. Adding and changing data

### INSERT INTO

**Query name:** Insert one or more rows  

**General query:**
```sql
INSERT INTO table_name (col1, col2, ...) VALUES (val1, val2, ...);
-- Multiple rows:
INSERT INTO table_name (col1, col2) VALUES (a1, a2), (b1, b2), ...;
```

**Example:**
```sql
INSERT INTO departments (dept_name) VALUES ('Computer Science');
INSERT INTO departments (dept_name) VALUES ('Mathematics');

INSERT INTO students (name, email, dept_id, year)
VALUES
    ('Ali', 'ali@uni.com', 1, 2),
    ('Bina', 'bina@uni.com', 1, 1),
    ('Chetan', 'chet@uni.com', 2, 3);
```

### UPDATE

**Query name:** Change existing rows  

**General query:**
```sql
UPDATE table_name SET col1 = val1, col2 = val2 WHERE condition;
```

**Example:**
```sql
UPDATE students SET year = 2 WHERE student_id = 1;
UPDATE students SET year = year + 1 WHERE dept_id = 1;
```

### DELETE

**Query name:** Remove rows  

**General query:**
```sql
DELETE FROM table_name WHERE condition;
```

**Example:**
```sql
DELETE FROM students WHERE student_id = 3;
```

Always use `WHERE` so you don’t delete every row.

---

## 5. Reading data (SELECT basics)

### SELECT all columns

**Query name:** Get all columns from a table  

**General query:**
```sql
SELECT * FROM table_name;
```

**Example:**
```sql
SELECT * FROM students;
```

### SELECT specific columns

**Query name:** Get only some columns  

**General query:**
```sql
SELECT col1, col2 FROM table_name;
```

**Example:**
```sql
SELECT name, email, year FROM students;
```

### WHERE

**Query name:** Filter rows  

**General query:**
```sql
SELECT columns FROM table_name WHERE condition;
```

**Example:**
```sql
SELECT * FROM students WHERE dept_id = 1;
SELECT name, year FROM students WHERE year >= 2;
```

### Comparison operators

Use `=`, `!=`, `<`, `>`, `<=`, `>=` in the condition.

**Example:**
```sql
SELECT * FROM students WHERE year = 2;
SELECT * FROM students WHERE year != 1;
SELECT * FROM students WHERE year > 1;
```

### AND, OR, NOT

**General query:**
```sql
SELECT ... WHERE condition1 AND condition2;
SELECT ... WHERE condition1 OR condition2;
SELECT ... WHERE NOT condition;
```

**Example:**
```sql
SELECT * FROM students WHERE dept_id = 1 AND year = 2;
SELECT * FROM students WHERE dept_id = 1 OR dept_id = 2;
```

### IN

**Query name:** Value in a list  

**General query:**
```sql
SELECT ... WHERE column IN (val1, val2, ...);
```

**Example:**
```sql
SELECT * FROM students WHERE dept_id IN (1, 2);
SELECT * FROM students WHERE year IN (1, 3);
```

### BETWEEN

**Query name:** Value in a range (inclusive)  

**General query:**
```sql
SELECT ... WHERE column BETWEEN low AND high;
```

**Example:**
```sql
SELECT * FROM students WHERE year BETWEEN 1 AND 2;
```

### LIKE

**Query name:** Pattern match; `%` = any text, `_` = one character  

**General query:**
```sql
SELECT ... WHERE column LIKE 'pattern';
```

**Example:**
```sql
SELECT * FROM students WHERE email LIKE '%@uni.com';
SELECT * FROM students WHERE name LIKE 'A%';
SELECT * FROM students WHERE name LIKE '_li';
```

### IS NULL

**Query name:** Find missing values  

**General query:**
```sql
SELECT ... WHERE column IS NULL;
SELECT ... WHERE column IS NOT NULL;
```

**Example:**
```sql
SELECT * FROM students WHERE email IS NULL;
```

---

## 6. Sorting and limiting rows

### ORDER BY

**Query name:** Sort results  

**General query:**
```sql
SELECT ... FROM table_name ORDER BY column [ASC|DESC];
```

**Example:**
```sql
SELECT name, year FROM students ORDER BY year;
SELECT name, year FROM students ORDER BY year DESC;
SELECT * FROM students ORDER BY dept_id, name;
```

### LIMIT (Oracle: FETCH FIRST n ROWS ONLY)

**Query name:** Return only first n rows  

**General query:**
```sql
SELECT ... ORDER BY ... FETCH FIRST n ROWS ONLY;
```

**Example:**
```sql
SELECT * FROM students ORDER BY name FETCH FIRST 2 ROWS ONLY;
```

### OFFSET (Oracle: OFFSET n ROWS FETCH NEXT m ROWS ONLY)

**Query name:** Skip rows then take some  

**General query:**
```sql
SELECT ... ORDER BY ... OFFSET n ROWS FETCH NEXT m ROWS ONLY;
```

**Example:**
```sql
SELECT * FROM students ORDER BY student_id OFFSET 1 ROWS FETCH NEXT 2 ROWS ONLY;
```

### Column alias (AS)

**Query name:** Rename a column in the result  

**General query:**
```sql
SELECT col AS alias_name FROM table_name;
```

**Example:**
```sql
SELECT name AS student_name, year AS current_year FROM students;
```

---

## 7. Aggregate functions

### COUNT

**Query name:** Count rows  

**General query:**
```sql
SELECT COUNT(*) FROM table_name;
SELECT COUNT(column) FROM table_name;  -- ignores NULLs
```

**Example:**
```sql
SELECT COUNT(*) AS total FROM students;
SELECT COUNT(email) AS with_email FROM students;
SELECT COUNT(*) FROM students WHERE dept_id = 1;
```

### SUM, AVG, MIN, MAX

**General query:**
```sql
SELECT SUM(column), AVG(column), MIN(column), MAX(column) FROM table_name;
```

**Example:**
```sql
SELECT SUM(year) AS sum_years FROM students;
SELECT AVG(year) AS avg_year FROM students;
SELECT MIN(year), MAX(year) FROM students;
```

---

## 8. GROUP BY and HAVING

### GROUP BY

**Query name:** Group rows and aggregate per group  

**General query:**
```sql
SELECT col1, aggregate(col2) FROM table_name GROUP BY col1;
```

**Example:**
```sql
SELECT dept_id, COUNT(*) AS num_students FROM students GROUP BY dept_id;
SELECT dept_id, COUNT(*), AVG(year) FROM students GROUP BY dept_id;
```

### HAVING

**Query name:** Filter groups (after aggregation). `WHERE` filters rows; `HAVING` filters groups.  

**General query:**
```sql
SELECT col, aggregate(...) FROM table_name GROUP BY col HAVING condition;
```

**Example:**
```sql
SELECT dept_id, COUNT(*) AS cnt FROM students GROUP BY dept_id HAVING COUNT(*) >= 2;
```

### GROUP BY multiple columns

**Example:**
```sql
SELECT dept_id, year, COUNT(*) FROM students GROUP BY dept_id, year;
```

---

## 9. Joins

Joins combine two (or more) tables using a common column. Here’s how the tables relate:

**Tables we use:**

| departments     | students                    |
|-----------------|-----------------------------|
| dept_id (PK)    | student_id (PK)             |
| dept_name       | name, email, dept_id (FK), year |

| courses         | enrollments                      |
|-----------------|----------------------------------|
| course_id (PK)  | enrollment_id (PK)               |
| course_name     | student_id (FK), course_id (FK), grade |
| dept_id (FK)    |                                  |

**Relationships:**  
`students.dept_id` → `departments.dept_id`  
`enrollments.student_id` → `students.student_id`  
`enrollments.course_id` → `courses.course_id`  
`courses.dept_id` → `departments.dept_id`

---

### INNER JOIN

**Query name:** Only rows that match in both tables  

**General query:**
```sql
SELECT columns FROM table1 t1
INNER JOIN table2 t2 ON t1.common_col = t2.common_col;
```

**Example:**
```sql
SELECT s.name, s.year, d.dept_name
FROM students s
INNER JOIN departments d ON s.dept_id = d.dept_id;
```

---

### LEFT JOIN

**Query name:** All rows from the left table; matching rows from the right (NULL if no match)  

**General query:**
```sql
SELECT columns FROM table1 t1
LEFT JOIN table2 t2 ON t1.common_col = t2.common_col;
```

**Example:**
```sql
SELECT d.dept_name, s.name
FROM departments d
LEFT JOIN students s ON d.dept_id = s.dept_id;
```

---

### RIGHT JOIN

**Query name:** All rows from the right table; matching from the left (NULL if no match)  

**General query:**
```sql
SELECT columns FROM table1 t1
RIGHT JOIN table2 t2 ON t1.common_col = t2.common_col;
```

**Example:**
```sql
SELECT s.name, e.grade
FROM students s
RIGHT JOIN enrollments e ON s.student_id = e.student_id;
```

---

### FULL OUTER JOIN

**Query name:** All rows from both tables; NULL where there is no match  

**General query:**
```sql
SELECT columns FROM table1 t1
FULL OUTER JOIN table2 t2 ON t1.common_col = t2.common_col;
```

**Example:**
```sql
SELECT s.student_id, e.course_id
FROM students s
FULL OUTER JOIN enrollments e ON s.student_id = e.student_id;
```

---

### Joining more than two tables

**Example:**
```sql
SELECT s.name, c.course_name, e.grade
FROM students s
INNER JOIN enrollments e ON s.student_id = e.student_id
INNER JOIN courses c ON e.course_id = c.course_id;
```

---

## 10. Views

**Query name:** Create a view (saved query you can use like a table)  

**General query:**
```sql
CREATE VIEW view_name AS SELECT ... FROM ... ;
```

**Example:**
```sql
CREATE VIEW student_dept_view AS
SELECT s.student_id, s.name, s.year, d.dept_name
FROM students s
LEFT JOIN departments d ON s.dept_id = d.dept_id;
```

**Use it:**
```sql
SELECT * FROM student_dept_view;
SELECT * FROM student_dept_view WHERE dept_name = 'Computer Science';
```

---

## 11. Subqueries

### Subquery in WHERE

**Query name:** Use the result of one query inside another  

**General query:**
```sql
SELECT ... FROM table WHERE column IN (SELECT column FROM other_table WHERE ...);
SELECT ... FROM table WHERE column operator (SELECT single_value ...);
```

**Example:**
```sql
SELECT * FROM students
WHERE dept_id IN (SELECT dept_id FROM departments WHERE dept_name = 'Computer Science');

SELECT * FROM students WHERE year > (SELECT AVG(year) FROM students);
```

### Subquery in SELECT

**Example:**
```sql
SELECT name,
       (SELECT COUNT(*) FROM enrollments e WHERE e.student_id = s.student_id) AS num_courses
FROM students s;
```

### EXISTS

**Query name:** Check if a subquery returns any row (often efficient)  

**General query:**
```sql
SELECT ... FROM table t WHERE EXISTS (SELECT 1 FROM other WHERE other.col = t.col AND ...);
```

**Example:**
```sql
SELECT * FROM students s
WHERE EXISTS (
    SELECT 1 FROM enrollments e
    WHERE e.student_id = s.student_id
);
```

---

## 12. Constraints (quick reference)

- **PRIMARY KEY:** Unique ID for each row.  
- **FOREIGN KEY:** Value must exist in the referenced table.  
- **UNIQUE:** No duplicate values (NULL usually allowed).  
- **NOT NULL:** Column must have a value.  
- **CHECK:** Condition that each row must satisfy.  
- **ON DELETE CASCADE:** When a parent row is deleted, delete related child rows.

**Example CHECK:**
```sql
ALTER TABLE students ADD CONSTRAINT chk_year CHECK (year BETWEEN 1 AND 5);
```

---

## 13. Indexes (quick idea)

**Query name:** Create an index to speed up searches on a column  

**General query:**
```sql
CREATE INDEX index_name ON table_name(column);
```

**Example:**
```sql
CREATE INDEX idx_student_email ON students(email);
CREATE INDEX idx_student_dept ON students(dept_id);
```

Use indexes on columns you often use in `WHERE` or `JOIN`. Don’t over-index small tables.

---

## 14. Transactions (COMMIT / ROLLBACK)

- **COMMIT:** Save all changes in the current transaction.  
- **ROLLBACK:** Undo all changes in the current transaction.

In Oracle, a transaction starts with the first DML (INSERT/UPDATE/DELETE); no explicit `BEGIN` is required.

**Example:**
```sql
UPDATE students SET year = 2 WHERE student_id = 1;
UPDATE students SET year = 1 WHERE student_id = 2;
COMMIT;   -- makes both updates permanent

-- Or if something went wrong:
-- ROLLBACK;   -- cancels both updates
```

---

## 15. Full setup script (Oracle FreeSQL)

Run this once to create the student/department/course/enrollment tables and sample data:

```sql
-- Drop in reverse order (children first)
BEGIN EXECUTE IMMEDIATE 'DROP TABLE enrollments'; EXCEPTION WHEN OTHERS THEN IF SQLCODE != -942 THEN RAISE; END IF; END;/
BEGIN EXECUTE IMMEDIATE 'DROP TABLE courses';      EXCEPTION WHEN OTHERS THEN IF SQLCODE != -942 THEN RAISE; END IF; END;/
BEGIN EXECUTE IMMEDIATE 'DROP TABLE students';    EXCEPTION WHEN OTHERS THEN IF SQLCODE != -942 THEN RAISE; END IF; END;/
BEGIN EXECUTE IMMEDIATE 'DROP TABLE departments'; EXCEPTION WHEN OTHERS THEN IF SQLCODE != -942 THEN RAISE; END IF; END;/

CREATE TABLE departments (
    dept_id   NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    dept_name VARCHAR2(50) NOT NULL
);

CREATE TABLE students (
    student_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name      VARCHAR2(100) NOT NULL,
    email     VARCHAR2(100),
    dept_id   NUMBER,
    year      NUMBER(1) DEFAULT 1,
    FOREIGN KEY (dept_id) REFERENCES departments(dept_id)
);

CREATE TABLE courses (
    course_id   NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    course_name VARCHAR2(100) NOT NULL,
    dept_id     NUMBER,
    FOREIGN KEY (dept_id) REFERENCES departments(dept_id)
);

CREATE TABLE enrollments (
    enrollment_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    student_id    NUMBER NOT NULL,
    course_id     NUMBER NOT NULL,
    grade         VARCHAR2(2),
    FOREIGN KEY (student_id) REFERENCES students(student_id),
    FOREIGN KEY (course_id)  REFERENCES courses(course_id)
);

INSERT INTO departments (dept_name) VALUES ('Computer Science');
INSERT INTO departments (dept_name) VALUES ('Mathematics');

INSERT INTO students (name, email, dept_id, year) VALUES
    ('Ali', 'ali@uni.com', 1, 2),
    ('Bina', 'bina@uni.com', 1, 1),
    ('Chetan', 'chet@uni.com', 2, 3);

INSERT INTO courses (course_name, dept_id) VALUES
    ('SQL Basics', 1),
    ('Calculus', 2);

INSERT INTO enrollments (student_id, course_id, grade) VALUES
    (1, 1, 'A'),
    (2, 1, 'B'),
    (3, 2, 'A');
```

---

## Summary

You’ve seen: creating and changing tables, inserting/updating/deleting data, selecting and filtering, sorting, aggregates, GROUP BY/HAVING, joins (with table pictures only there), views, subqueries, and a short note on constraints, indexes, and transactions.  

Practice each “Example” block at [freesql.oracle.com](https://freesql.oracle.com/) to get comfortable.
